components:
  schemas:

    #-----Responses-----

    CompilationDto:
      type: object
      description: Ответ, подборка событий
      required:
        - events
        - id
        - pinned
        - title
      properties:
        events:
          type: array
          items:
            $ref: 'components.yaml#/components/schemas/EventShortDto'
        id:
          type: integer
          format: int64
          example: 1
          description: Идентификатор
        pinned:
          type: boolean
          example: true
          description: Закреплена ли подборка на главной странице сайта
        title:
          type: string
          example: Летние концерты
          description: Заголовок подборки

    EventShortDto:
      type: object
      description: Краткая информация о событии
      required:
        - annotation
        - category
        - confirmedRequests
        - eventDate
        - id
        - initiator
        - paid
        - title
        - views
      properties:
        annotation:
          type: string
          example: Эксклюзивность нашего шоу гарантирует привлечение максимальной зрительской аудитории
          description: Краткое описание
        category:
          $ref: 'components.yaml#/components/schemas/CategoryDto'
        confirmedRequests:
          type: integer
          format: int64
          example: 5
          description: Количество одобренных заявок на участие в данном событии
        eventDate:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2024-12-31 15:10:05
          description: Дата и время на которые намечено событие (в формате "yyyy-MM-dd HH:mm:ss")
        id:
          type: integer
          format: int64
          example: 1
          description: Идентификатор
        initiator:
          $ref: 'components.yaml#/components/schemas/UserShortDto'
        paid:
          type: boolean
          example: true
          description: Нужно ли оплачивать участие
        title:
          type: string
          example: Знаменитое шоу 'Летающая кукуруза'
          description: Заголовок
        views:
          type: integer
          format: int64
          example: 999
          description: Количество просмотрев события

    CategoryDto:
      type: object
      description: Категория
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
          description: Идентификатор категории
        name:
          type: string
          maxLength: 50
          minLength: 1
          example: Концерты
          description: Название категории

    UserShortDto:
      type: object
      description: Информация о пользователе
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int64
          example: 1
          description: Идентификатор
        name:
          type: string
          example: Фёдоров Матвей
          description: Имя

    NewCompilationDto:
      type: object
      description: Подборка событий
      required:
        - events
        - pinned
        - title
      properties:
        events:
          type: array
          items:
            type: integer
            format: int64
            example: "[ 1, 2, 3 ]"
          uniqueItems: true
          description: Подборка событий
        pinned:
          type: boolean
          default: false
          example: false
          description: Закреплена ли подборка на главной странице сайта
        title:
          type: string
          maxLength: 50
          minLength: 1
          example: Летние концерты
          description: Заголовок подборки

    UpdateCompilationRequest:
      type: object
      description: Подборка событий
      properties:
        events:
          type: array
          items:
            type: integer
            format: int64
            example: "[ 1, 2, 3 ]"
          uniqueItems: true
          description: Список id событий подборки для полной замены текущего списка
        pinned:
          type: boolean
          default: false
          example: false
          description: Закреплена ли подборка на главной странице сайта
        title:
          type: string
          maxLength: 50
          minLength: 1
          example: Летние концерты
          description: Заголовок подборки

    NewCategoryDto:
      type: object
      description: Данные для добавления новой категории
      required:
        - name
      properties:
        name:
          type: string
          maxLength: 50
          minLength: 1
          example: Концерты
          description: Название категории

    NewEventDto:
      type: object
      description: Новое событие
      required:
        - annotation
        - category
        - description
        - eventDate
        - location
        - paid
        - participantLimit
        - requestModeration
        - title
      properties:
        annotation:
          type: string
          maxLength: 2000
          minLength: 20
          example: Сплав на байдарках похож на полет.
          description: Краткое описание события
        category:
          type: integer
          format: int64
          example: 2
          description: id категории к которой относится событие
        description:
          type: string
          maxLength: 7000
          minLength: 20
          example: Сплав на байдарках похож на полет. На спокойной воде — это парение. На бурной, порожистой — выполнение фигур высшего пилотажа. И то, и другое дарят чувство обновления, феерические эмоции, яркие впечатления.
          description: Полное описание события
        eventDate:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2024-12-31 15:10:05
          description: Дата и время на которые намечено событие. Дата и время указываются в формате "yyyy-MM-dd HH:mm:ss"
        location:
          $ref: 'components.yaml#/components/schemas/Location'
        paid:
          type: boolean
          example: true
          default: false
          description: Нужно ли оплачивать участие в событии
        participantLimit:
          type: integer
          format: int32
          minimum: 0
          example: 10
          default: 0
          description: Ограничение на количество участников. Значение 0 - означает отсутствие ограничения
        requestModeration:
          type: boolean
          example: false
          default: true
          description: Нужна ли пре-модерация заявок на участие. Если true, то все заявки будут ожидать подтверждения инициатором события. Если false - то будут подтверждаться автоматически.
        title:
          type: string
          required: true
          maxLength: 120
          minLength: 3
          example: Сплав на байдарках
          description: Заголовок события

    Location:
      type: object
      description: Широта и долгота места проведения события
      required:
        - lat
        - lon
      properties:
        lat:
          type: number
          format: float
          example: 55.754167
          description: Широта
        lon:
          type: number
          format: float
          example: 55.754167
          description: Долгота

    EventFullDto:
      type: object
      description: Полная информация о событии
      required:
        - annotation
        - category
        - confirmedRequests
        - createdOn
        - description
        - eventDate
        - id
        - initiator
        - location
        - publishedOn
        - state
        - title
        - views
      properties:
        annotation:
          type: string
          example: Эксклюзивность нашего шоу гарантирует привлечение максимальной зрительской аудитории
          description: Краткое описание
        category:
          $ref: 'components.yaml#/components/schemas/CategoryDto'
        confirmedRequests:
          type: integer
          format: int64
          example: 5
          description: Количество одобренных заявок на участие в данном событии
        createdOn:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2022-09-06 11:00:23
          description: Дата и время создания события (в формате "yyyy-MM-dd HH:mm:ss")
        description:
          type: string
          example: Что получится, если соединить кукурузу и полёт? Создатели "Шоу летающей кукурузы" испытали эту идею на практике и воплотили в жизнь инновационный проект, предлагающий свежий взгляд на развлечения...
          description: Полное описание события
        eventDate:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2024-12-31 15:10:05
          description: Дата и время на которые намечено событие (в формате "yyyy-MM-dd HH:mm:ss")
        id:
          type: integer
          format: int64
          example: 1
          description: Идентификатор
        initiator:
          $ref: 'components.yaml#/components/schemas/UserShortDto'
        location:
          $ref: 'components.yaml#/components/schemas/Location'
        paid:
          type: boolean
          default: false
          example: true
          description: Нужно ли оплачивать участие
        participantLimit:
          type: integer
          format: int32
          example: 10
          default: 0
          description: Ограничение на количество участников. Значение 0 - означает отсутствие ограничения
        publishedOn:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2022-09-06 15:10:05
          description: Дата и время публикации события (в формате "yyyy-MM-dd HH:mm:ss")
        requestModeration:
          type: boolean
          example: true
          default: true
          description: Нужна ли пре-модерация заявок на участие
        state:
          type: string
          enum: [ PENDING, PUBLISHED, CANCELED ]
          example: PUBLISHED
          description: Список состояний жизненного цикла события
        title:
          type: string
          example: Знаменитое шоу 'Летающая кукуруза'
          description: Заголовок
        views:
          type: integer
          format: int64
          example: 999
          description: Количество просмотрев события

    UpdateEventUserRequest:
      type: object
      description: Данные для изменения информации о событии. Если поле в запросе не указано (равно null) - значит изменение этих данных не треубется.
      properties:
        annotation:
          type: string
          maxLength: 2000
          minLength: 20
          example: Сап прогулки по рекам и каналам – это возможность увидеть Практикбург с другого ракурса
          description: Новая аннотация
        category:
          type: integer
          format: int64
          example: 3
          description: Новая категория
        description:
          type: string
          maxLength: 7000
          minLength: 20
          example: От английского SUP - Stand Up Paddle — "стоя на доске с веслом", гавайская разновидность сёрфинга, в котором серфер, стоя на доске, катается на волнах и при этом гребет веслом, а не руками, как в классическом серфинге.
          description: Новое описание
        eventDate:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2023-10-11 23:10:05
          description: Новые дата и время на которые намечено событие. Дата и время указываются в формате "yyyy-MM-dd HH:mm:ss"
        location:
          $ref: 'components.yaml#/components/schemas/Location'
        paid:
          type: boolean
          example: true
          description: Новое значение флага о платности мероприятия
        participantLimit:
          type: integer
          format: int32
          minimum: 0
          example: 7
          description: Новый лимит пользователей
        requestModeration:
          type: boolean
          example: true
          description: Нужна ли пре-модерация заявок на участие
        stateAction:
          type: string
          enum: [ SEND_TO_REVIEW, CANCEL_REVIEW ]
          example: CANCEL_REVIEW
          description: Изменение сотояния события
        title:
          type: string
          maxLength: 120
          minLength: 3
          example: Сап прогулки по рекам и каналам
          description: Новый заголовок

    ParticipationRequestDto:
      type: object
      description: Заявка на участие в событии
      required:
        - created
        - event
        - id
        - requester
        - status
      properties:
        created:
          type: string
          example: 2022-09-06T21:10:05.432
          description: Дата и время создания заявки
        event:
          type: integer
          format: int64
          example: 1
          description: Идентификатор события
        id:
          type: integer
          format: int64
          example: 3
          description: Идентификатор заявки
        requester:
          type: integer
          format: int64
          example: 2
          description: Идентификатор пользователя, отправившего заявку
        status:
          type: string
          example: PENDING
          description: Статус заявки

    EventRequestStatusRequest:
      type: object
      description: Изменение статуса запроса на участие в событии текущего пользователя
      required:
        - requestIds
        - status
      properties:
        requestIds:
          type: array
          items:
            type: integer
            format: int64
          description: Идентификаторы запросов на участие в событии текущего пользователя
        status:
          type: string
          enum: [ CONFIRMED, REJECTED ]
          example: CONFIRMED
          description: Новый статус запроса на участие в событии текущего пользователя

    EventRequestStatusUpdateResult:
      type: object
      description: Результат подтверждения/отклонения заявок на участие в событии
      required:
        - confirmedRequests
        - rejectedRequests
      properties:
        confirmedRequests:
          type: array
          items:
            $ref: 'components.yaml#/components/schemas/ParticipationRequestDto'
        rejectedRequests:
          type: array
          items:
            $ref: 'components.yaml#/components/schemas/ParticipationRequestDto'

    UpdateEventAdminRequest:
      type: object
      description: Данные для изменения информации о событии. Если поле в запросе не указано (равно null) - значит изменение этих данных не треубется.
      properties:
        annotation:
          type: string
          maxLength: 2000
          minLength: 20
          example: Сап прогулки по рекам и каналам – это возможность увидеть Практикбург с другого ракурса
          description: Новая аннотация
        category:
          type: integer
          format: int64
          example: 3
          description: Новая категория
        description:
          type: string
          maxLength: 7000
          minLength: 20
          example: От английского SUP - Stand Up Paddle — "стоя на доске с веслом", гавайская разновидность сёрфинга, в котором серфер, стоя на доске, катается на волнах и при этом гребет веслом, а не руками, как в классическом серфинге.
          description: Новое описание
        eventDate:
          type: string
          pattern: '^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$'
          example: 2023-10-11 23:10:05
          description: Новые дата и время на которые намечено событие. Дата и время указываются в формате "yyyy-MM-dd HH:mm:ss"
        location:
          $ref: 'components.yaml#/components/schemas/Location'
        paid:
          type: boolean
          example: true
          description: Новое значение флага о платности мероприятия
        participantLimit:
          type: integer
          format: int32
          minimum: 0
          example: 7
          description: Новый лимит пользователей
        requestModeration:
          type: boolean
          example: true
          description: Нужна ли пре-модерация заявок на участие
        stateAction:
          type: string
          enum: [ PUBLISH_EVENT, REJECT_EVENT ]
          example: PUBLISH_EVENT
          description: Новое состояние события
        title:
          type: string
          maxLength: 120
          minLength: 3
          example: Сап прогулки по рекам и каналам
          description: Новый заголовок

    UserDto:
      type: object
      description: Пользователь
      required:
        - email
        - id
        - name
      properties:
        email:
          type: string
          example: petrov.i@practicummail.ru
          description: Почтовый адрес
        id:
          type: integer
          format: int64
          readOnly: true
          example: 1
          description: Идентификатор
        name:
          type: string
          example: Петров Иван
          description: Имя

    NewUserRequest:
      type: object
      description: Данные нового пользователя
      required:
        - email
        - name
      properties:
        email:
          type: string
          maxLength: 254
          minLength: 6
          example: ivan.petrov@practicummail.ru
          description: Почтовый адрес
        name:
          type: string
          maxLength: 250
          minLength: 2
          example: Иван Петров
          description: Имя

    #-----Error-----

    ApiError:
      required:
        - errors
        - message
        - reason
        - status
        - timestamp
      properties:
        errors:
          type: array
          items:
            type: string
            example: "[]"
          description: Список стектрейсов или описания ошибок
        message:
          type: string
          example: Only pending or canceled events can be changed
          description: Сообщение об ошибке
        reason:
          type: string
          example: For the requested operation the conditions are not met.
          description: Общее описание причины ошибки
        status:
          type: string
          enum: [ 100 CONTINUE, 101 SWITCHING_PROTOCOLS, 102 PROCESSING, 103 CHECKPOINT, 200 OK, 201 CREATED, 202 ACCEPTED, 203 NON_AUTHORITATIVE_INFORMATION, 204 NO_CONTENT, 205 RESET_CONTENT, 206 PARTIAL_CONTENT, 207 MULTI_STATUS, 208 ALREADY_REPORTED, 226 IM_USED, 300 MULTIPLE_CHOICES, 301 MOVED_PERMANENTLY, 302 FOUND, 302 MOVED_TEMPORARILY, 303 SEE_OTHER, 304 NOT_MODIFIED, 305 USE_PROXY, 307 TEMPORARY_REDIRECT, 308 PERMANENT_REDIRECT, 400 BAD_REQUEST, 401 UNAUTHORIZED, 402 PAYMENT_REQUIRED, 403 FORBIDDEN, 404 NOT_FOUND, 405 METHOD_NOT_ALLOWED, 406 NOT_ACCEPTABLE, 407 PROXY_AUTHENTICATION_REQUIRED, 408 REQUEST_TIMEOUT, 409 CONFLICT, 410 GONE, 411 LENGTH_REQUIRED, 412 PRECONDITION_FAILED, 413 PAYLOAD_TOO_LARGE, 413 REQUEST_ENTITY_TOO_LARGE, 414 URI_TOO_LONG, 414 REQUEST_URI_TOO_LONG, 415 UNSUPPORTED_MEDIA_TYPE, 416 REQUESTED_RANGE_NOT_SATISFIABLE, 417 EXPECTATION_FAILED, 418 I_AM_A_TEAPOT, 419 INSUFFICIENT_SPACE_ON_RESOURCE, 420 METHOD_FAILURE, 421 DESTINATION_LOCKED, 422 UNPROCESSABLE_ENTITY, 423 LOCKED, 424 FAILED_DEPENDENCY, 425 TOO_EARLY, 426 UPGRADE_REQUIRED, 428 PRECONDITION_REQUIRED, 429 TOO_MANY_REQUESTS, 431 REQUEST_HEADER_FIELDS_TOO_LARGE, 451 UNAVAILABLE_FOR_LEGAL_REASONS, 500 INTERNAL_SERVER_ERROR, 501 NOT_IMPLEMENTED, 502 BAD_GATEWAY, 503 SERVICE_UNAVAILABLE, 504 GATEWAY_TIMEOUT, 505 HTTP_VERSION_NOT_SUPPORTED, 506 VARIANT_ALSO_NEGOTIATES, 507 INSUFFICIENT_STORAGE, 508 LOOP_DETECTED, 509 BANDWIDTH_LIMIT_EXCEEDED, 510 NOT_EXTENDED, 511 NETWORK_AUTHENTICATION_REQUIRED ]
          example: FORBIDDEN
          description: Код статуса HTTP-ответа
        timestamp:
          type: string
          example: 2022-06-09 06:27:23
          description: Дата и время когда произошла ошибка (в формате "yyyy-MM-dd HH:mm:ss")
